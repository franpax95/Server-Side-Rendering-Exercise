!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=8)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("@reduxjs/toolkit")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("react-dom/server")},function(e,t,r){"use strict";r.r(t);var o=r(0),n=r.n(o),s=r(9),i=r.n(s),a=r(1),c=r(2),u=r(15),d=r.n(u),l=Object(c.createSlice)({name:"person",initialState:{name:"John Doe",age:35,friends:{isLoading:!1,data:[]}},reducers:{ageIncrement:function(e){e.age+=1},ageDecrement:function(e){e.age-=1},setAge:function(e,t){e.age=t.payload},fetchFriendsStart:function(e){e.friends.isLoading=!0},fetchFriendsSuccess:function(e,t){e.friends.isLoading=!1,e.friends.data=t.payload}}}),f=l.actions,h=f.ageIncrement,p=f.ageDecrement,y=f.setAge,g=function(){return function(e){var t=l.actions,r=t.fetchFriendsStart,o=t.fetchFriendsSuccess;return e(r()),d()("http://localhost:8081/api/friends").then((function(e){return e.json()})).then((function(e){return e.friends})).then((function(t){return e(o(t))}))}},m=l.reducer,b={ageIncrement:h,ageDecrement:p,setAge:y,fetchFriends:g},v=Object(a.connect)((function(e){return{name:e.person.name,age:e.person.age,friends:e.person.friends.data,isLoading:e.person.friends.isLoading}}),b)((function(e){var t=e.name,r=e.age,s=e.ageIncrement,i=e.ageDecrement,a=e.setAge,c=e.fetchFriends,u=e.friends,d=e.isLoading;Object(o.useEffect)((function(){a(35)}),[]),Object(o.useEffect)((function(){u.length||c()}),[u]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{src:"/static/doggyfamily.jpg",alt:"doggyfamily",style:{maxWidth:"20vw"}}),n.a.createElement("p",null,"Hello ",t,", from ","server","!"),n.a.createElement("p",null,"Your age is: ",r),n.a.createElement("p",null,n.a.createElement("button",{onClick:i},"Younger"),n.a.createElement("button",{onClick:s},"Older"),n.a.createElement("button",{onClick:function(){return a(50)}},"age = 50")),n.a.createElement("p",null,"Is fetching: ",d?"Yes, please wait...":"No"),n.a.createElement("p",null,"Friends: ",u.join(", ")))})),w=r(3),x=r(4),_=r(5),S=r(6),E=r(7).renderToString,T=S();T.server=_.createServer(T),T.use("/static",S.static(x.resolve("build/static"))),T.use("/main.css",S.static(x.resolve("build/main.css"))),T.use("/bundle.js",S.static(x.resolve("build/bundle.js"))),T.get("/api/friends",(function(e,t){t.json({friends:["James","Eric","Olivia","Emma","Charlotte"]})})),T.get("*",(function(e,t){var r=x.resolve("build","index.html");w.readFile(r,"utf-8",(function(e,r){e&&(console.error(e),t.status(404).send("Error: 404"));var o,s=Object(c.configureStore)({reducer:{person:m},preloadedState:o}),u=[s.dispatch(y(75)),s.dispatch(g())];Promise.all(u).then((function(){var e=E(n.a.createElement(a.Provider,{store:s},n.a.createElement(v,null))),o=r.replace("{{HTML}}",e).replace("{{INITIAL_STATE}}",i()(s.getState()),{isJson:!0});t.status(200).send(o)}))}))}));var j=process.env.PORT||8080;T.server.listen(j),console.log("Listening on port ".concat(j))},function(e,t){e.exports=require("serialize-javascript")},function(e,t){e.exports=require("url")},function(e,t,r){var o=r(19).convert,n=r(23),s=r(13).PassThrough,i=r(14);function a(e,t){t=t||{},this.body=e,this.bodyUsed=!1,this.size=t.size||0,this.timeout=t.timeout||0,this._raw=[],this._abort=!1}e.exports=a,a.prototype.json=function(){var e=this;return this._decode().then((function(t){try{return JSON.parse(t.toString())}catch(t){return a.Promise.reject(new i("invalid json response body at "+e.url+" reason: "+t.message,"invalid-json"))}}))},a.prototype.text=function(){return this._decode().then((function(e){return e.toString()}))},a.prototype.buffer=function(){return this._decode()},a.prototype._decode=function(){var e=this;return this.bodyUsed?a.Promise.reject(new Error("body used already for: "+this.url)):(this.bodyUsed=!0,this._bytes=0,this._abort=!1,this._raw=[],new a.Promise((function(t,r){var o;return"string"==typeof e.body?(e._bytes=e.body.length,e._raw=[new Buffer(e.body)],t(e._convert())):e.body instanceof Buffer?(e._bytes=e.body.length,e._raw=[e.body],t(e._convert())):(e.timeout&&(o=setTimeout((function(){e._abort=!0,r(new i("response timeout at "+e.url+" over limit: "+e.timeout,"body-timeout"))}),e.timeout)),e.body.on("error",(function(t){r(new i("invalid response body at: "+e.url+" reason: "+t.message,"system",t))})),e.body.on("data",(function(t){if(!e._abort&&null!==t){if(e.size&&e._bytes+t.length>e.size)return e._abort=!0,void r(new i("content size at "+e.url+" over limit: "+e.size,"max-size"));e._bytes+=t.length,e._raw.push(t)}})),void e.body.on("end",(function(){e._abort||(clearTimeout(o),t(e._convert()))})))})))},a.prototype._convert=function(e){e=e||"utf-8";var t,r,n=this.headers.get("content-type"),s="utf-8";if(n){if(!/text\/html|text\/plain|\+xml|\/xml/i.test(n))return Buffer.concat(this._raw);t=/charset=([^;]*)/i.exec(n)}if(!t&&this._raw.length>0){for(var i=0;i<this._raw.length&&!((r+=this._raw[i].toString()).length>1024);i++);r=r.substr(0,1024)}return!t&&r&&(t=/<meta.+?charset=(['"])(.+?)\1/i.exec(r)),!t&&r&&(t=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(r))&&(t=/charset=(.*)/i.exec(t.pop())),!t&&r&&(t=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(r)),t&&("gb2312"!==(s=t.pop())&&"gbk"!==s||(s="gb18030")),o(Buffer.concat(this._raw),e,s)},a.prototype._clone=function(e){var t,r,o=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n(o)&&"function"!=typeof o.getBoundary&&(t=new s,r=new s,o.pipe(t),o.pipe(r),e.body=t,o=r),o},a.Promise=global.Promise},function(e,t){function r(e){var t=this;for(var o in this._headers={},e instanceof r&&(e=e.raw()),e)e.hasOwnProperty(o)&&("string"==typeof e[o]?this.set(o,e[o]):"number"!=typeof e[o]||isNaN(e[o])?Array.isArray(e[o])&&e[o].forEach((function(e){t.append(o,e.toString())})):this.set(o,e[o].toString()))}e.exports=r,r.prototype.get=function(e){var t=this._headers[e.toLowerCase()];return t?t[0]:null},r.prototype.getAll=function(e){return this.has(e)?this._headers[e.toLowerCase()]:[]},r.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this._headers).forEach((function(r){this._headers[r].forEach((function(o){e.call(t,o,r,this)}),this)}),this)},r.prototype.set=function(e,t){this._headers[e.toLowerCase()]=[t]},r.prototype.append=function(e,t){this.has(e)?this._headers[e.toLowerCase()].push(t):this.set(e,t)},r.prototype.has=function(e){return this._headers.hasOwnProperty(e.toLowerCase())},r.prototype.delete=function(e){delete this._headers[e.toLowerCase()]},r.prototype.raw=function(){return this._headers}},function(e,t){e.exports=require("stream")},function(e,t,r){function o(e,t,r){this.name=this.constructor.name,this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}e.exports=o,r(24).inherits(o,Error)},function(e,t,r){"use strict";var o=r(16);e.exports=function(e,t){return/^\/\//.test(e)&&(e="https:"+e),o.call(this,e,t)},global.fetch||(global.fetch=e.exports,global.Response=o.Response,global.Headers=o.Headers,global.Request=o.Request)},function(e,t,r){r(10).parse;var o=r(10).resolve,n=r(5),s=r(17),i=r(18),a=r(13),c=r(11),u=r(25),d=r(12),l=r(26),f=r(14);function h(e,t){if(!(this instanceof h))return new h(e,t);if(!h.Promise)throw new Error("native promise missing, set Fetch.Promise to your favorite alternative");c.Promise=h.Promise;var r=this;return new h.Promise((function(c,p){var y,g=new l(e,t);if(!g.protocol||!g.hostname)throw new Error("only absolute urls are supported");if("http:"!==g.protocol&&"https:"!==g.protocol)throw new Error("only http(s) protocols are supported");y="https:"===g.protocol?s.request:n.request;var m=new d(g.headers);g.compress&&m.set("accept-encoding","gzip,deflate"),m.has("user-agent")||m.set("user-agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),m.has("connection")||g.agent||m.set("connection","close"),m.has("accept")||m.set("accept","*/*"),!m.has("content-type")&&g.body&&"function"==typeof g.body.getBoundary&&m.set("content-type","multipart/form-data; boundary="+g.body.getBoundary()),!m.has("content-length")&&/post|put|patch|delete/i.test(g.method)&&("string"==typeof g.body?m.set("content-length",Buffer.byteLength(g.body)):g.body&&"function"==typeof g.body.getLengthSync?(g.body._lengthRetrievers&&0==g.body._lengthRetrievers.length||g.body.hasKnownLength&&g.body.hasKnownLength())&&m.set("content-length",g.body.getLengthSync().toString()):void 0!==g.body&&null!==g.body||m.set("content-length","0")),g.headers=m.raw(),g.headers.host&&(g.headers.host=g.headers.host[0]);var b,v=y(g);g.timeout&&v.once("socket",(function(e){b=setTimeout((function(){v.abort(),p(new f("network timeout at: "+g.url,"request-timeout"))}),g.timeout)})),v.on("error",(function(e){clearTimeout(b),p(new f("request to "+g.url+" failed, reason: "+e.message,"system",e))})),v.on("response",(function(e){if(clearTimeout(b),r.isRedirect(e.statusCode)&&"manual"!==g.redirect)return"error"===g.redirect?void p(new f("redirect mode is set to error: "+g.url,"no-redirect")):g.counter>=g.follow?void p(new f("maximum redirect reached at: "+g.url,"max-redirect")):e.headers.location?(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==g.method)||(g.method="GET",delete g.body,delete g.headers["content-length"]),g.counter++,void c(h(o(g.url,e.headers.location),g))):void p(new f("redirect location header missing at: "+g.url,"invalid-redirect"));var t=new d(e.headers);"manual"===g.redirect&&t.has("location")&&t.set("location",o(g.url,t.get("location")));var n,s=e.pipe(new a.PassThrough),l={url:g.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:g.size,timeout:g.timeout};if(!g.compress||"HEAD"===g.method||!t.has("content-encoding")||204===e.statusCode||304===e.statusCode)return n=new u(s,l),void c(n);var y=t.get("content-encoding");if("gzip"==y||"x-gzip"==y)return s=s.pipe(i.createGunzip()),n=new u(s,l),void c(n);"deflate"!=y&&"x-deflate"!=y?(n=new u(s,l),c(n)):e.pipe(new a.PassThrough).once("data",(function(e){s=8==(15&e[0])?s.pipe(i.createInflate()):s.pipe(i.createInflateRaw()),n=new u(s,l),c(n)}))})),"string"==typeof g.body||g.body instanceof Buffer?(v.write(g.body),v.end()):"object"==typeof g.body&&g.body.pipe?g.body.pipe(v):"object"==typeof g.body?(v.write(g.body.toString()),v.end()):v.end()}))}e.exports=h,e.exports.default=e.exports,h.prototype.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},h.Promise=global.Promise,h.Response=u,h.Headers=d,h.Request=l},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";var o=r(20),n=r(21);function s(e,t,r){return"UTF-8"===t?o.decode(e,r):"UTF-8"===r?o.encode(e,t):o.encode(o.decode(e,r),t)}function i(e){return(e||"").toString().trim().replace(/^latin[\-_]?(\d+)$/i,"ISO-8859-$1").replace(/^win(?:dows)?[\-_]?(\d+)$/i,"WINDOWS-$1").replace(/^utf[\-_]?(\d+)$/i,"UTF-$1").replace(/^ks_c_5601\-1987$/i,"CP949").replace(/^us[\-_]?ascii$/i,"ASCII").toUpperCase()}e.exports.convert=function(e,t,r,o){var a;r=i(r||"UTF-8"),t=i(t||"UTF-8"),e=e||"","UTF-8"!==r&&"string"==typeof e&&(e=new Buffer(e,"binary"));if(r===t)a="string"==typeof e?new Buffer(e):e;else if(n&&!o)try{a=function(e,t,r){var o,s;return s=new n(r,t+"//TRANSLIT//IGNORE"),(o=s.convert(e)).slice(0,o.length)}(e,t,r)}catch(o){console.error(o);try{a=s(e,t,r)}catch(t){console.error(t),a=e}}else try{a=s(e,t,r)}catch(t){console.error(t),a=e}"string"==typeof a&&(a=new Buffer(a,"utf-8"));return a}},function(e,t){e.exports=require("iconv-lite")},function(e,t,r){"use strict";var o;try{"iconv",o=r(22)("iconv").Iconv}catch(e){}e.exports=o},function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=22},function(e,t){e.exports=require("is-stream")},function(e,t){e.exports=require("util")},function(e,t,r){var o=r(5),n=r(12),s=r(11);function i(e,t){t=t||{},this.url=t.url,this.status=t.status||200,this.statusText=t.statusText||o.STATUS_CODES[this.status],this.headers=new n(t.headers),this.ok=this.status>=200&&this.status<300,s.call(this,e,t)}e.exports=i,i.prototype=Object.create(s.prototype),i.prototype.clone=function(){return new i(this._clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}},function(e,t,r){var o=r(10).parse,n=r(12),s=r(11);function i(e,t){var r,a;e instanceof i?(r=e.url,a=o(r)):(a=o(r=e),e={}),t=t||{},this.method=t.method||e.method||"GET",this.redirect=t.redirect||e.redirect||"follow",this.headers=new n(t.headers||e.headers||{}),this.url=r,this.follow=void 0!==t.follow?t.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==t.compress?t.compress:void 0===e.compress||e.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,s.call(this,t.body||this._clone(e),{timeout:t.timeout||e.timeout||0,size:t.size||e.size||0}),this.protocol=a.protocol,this.hostname=a.hostname,this.port=a.port,this.path=a.path,this.auth=a.auth}e.exports=i,i.prototype=Object.create(s.prototype),i.prototype.clone=function(){return new i(this)}}]);